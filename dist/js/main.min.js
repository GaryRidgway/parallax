let fpCheckBox,eCheckBox,kCheckBox,lCheckBox,zoomSlide,lancetWindow,body,personSlider,person,kinect,leaves,leavesFrame,lines,scanTo,scanFrom,layer1Tex,layer2Tex,layer3Tex,layer4Tex,layer5Tex;function goFirstPerson(){makeTransitory(body,700),1==fpCheckBox.checked?body.classList.add("first"):body.classList.remove("first")}function makeTransitory(e,t){e.classList.add("transitory"),asyncDelay(t,(function(){e.classList.remove("transitory")}))}function slidePerson(){const e=personSlider.value,t=parseFloat(getComputedStyle(body).getPropertyValue("--distance"));body.style.setProperty("--person-position",e+"px"),body.style.setProperty("--hypot",hypot(t,e));const n=-(calcAngleDegrees(e,-354)+90);lines.forEach((function(e){body.style.setProperty("--angle",n+"deg");const t=scale(n,24.724,-24.724,-19.5,19.5);body.style.setProperty("--scan-angle",t+"deg");const o=scale(n,24.724,-24.724,-24,24);body.style.setProperty("--scan-slide",o+"px")}));const o=calcPlanePos(100,n+90)/.5;layer1Tex.style.setProperty("--lateral",-o+"px");const c=calcPlanePos(200,n+90)/1.75;layer2Tex.style.setProperty("--lateral",-c+"px");const a=calcPlanePos(300,n+90)/5;layer3Tex.style.setProperty("--lateral",-a+"px");const s=calcPlanePos(400,n+90)/15;layer4Tex.style.setProperty("--lateral",-s+"px");const r=calcPlanePos(500,n+90)/30;layer5Tex.style.setProperty("--lateral",-r+"px")}function calcAngleDegrees(e,t){return 180*Math.atan2(t,e)/Math.PI}function forceExpand(){1==eCheckBox.checked?(lancetWindow.classList.add("force-expand"),eCheckBox.parentElement.classList.add("checked"),makeTransitory(lancetWindow,650)):(lancetWindow.classList.remove("force-expand"),eCheckBox.parentElement.classList.remove("checked"),makeTransitory(lancetWindow,350))}function calcPlanePos(e,t){const n=t/180*Math.PI;return e/Math.tan(-n)}function hypot(e,t){const n=Math.pow(e,2)+Math.pow(t,2);return Math.sqrt(n)}function kinectTracking(){1==kCheckBox.checked?(kinect.classList.add("show-scan"),kCheckBox.parentElement.classList.add("checked"),makeTransitory(lancetWindow,650)):(kinect.classList.remove("show-scan"),kCheckBox.parentElement.classList.remove("checked"),makeTransitory(lancetWindow,350))}function displayLeaves(){1==lCheckBox.checked?(leaves.classList.add("show-leaves"),lCheckBox.parentElement.classList.add("checked"),makeTransitory(leaves,650)):(leaves.classList.remove("show-leaves"),lCheckBox.parentElement.classList.remove("checked"),makeTransitory(leaves,350))}function preCheck(){forceExpand(),kinectTracking(),displayLeaves()}function leavesProdCheck(){leavesFrame.addEventListener("load",(function(e){leavesFrame.contentWindow.checkProd()}))}document.addEventListener("DOMContentLoaded",(function(e){fpCheckBox=document.getElementById("firstPerson"),eCheckBox=document.getElementById("expand"),kCheckBox=document.getElementById("scan"),lCheckBox=document.getElementById("leaves"),zoomSlide=document.getElementById("zoom"),lancetWindow=document.getElementById("window"),body=document.querySelector("body"),personSlider=document.getElementById("personPosition"),person=document.getElementById("person"),kinect=document.getElementById("kinect"),leaves=document.getElementById("layer1-1"),leavesFrame=document.querySelector("#layer1-1 iframe"),lines=document.querySelectorAll(".viewline .texture"),scanTo=document.querySelectorAll(".kinect-scan.kinect-scan-to"),scanFrom=document.querySelectorAll(".kinect-scan.kinect-scan-from"),layer1Tex=document.querySelector("#layer1 .texture"),layer2Tex=document.querySelector("#layer2 .texture"),layer3Tex=document.querySelector("#layer3 .texture"),layer4Tex=document.querySelector("#layer4 .texture"),layer5Tex=document.querySelector("#layer5 .texture"),initMovement(),preCheck(),goFirstPerson()}));