let mouseStart,controlContainer,vp,floor,scrollDiff,scrollOffset,scrollDampening,isMouseDown=!1;function controlDown(o){isMouseDown=!0,mouseStart={x:o.x,y:o.y},controlContainer=o.target,controlContainer.classList.add("grabbing")}function controlUp(o){if(isMouseDown){isMouseDown=!1;let e={x:-(mouseStart.x-o.x),y:-(mouseStart.y-o.y)};controlContainer.classList.remove("grabbing");let t=parseFloat(getComputedStyle(controlContainer).getPropertyValue("--x")),n=parseFloat(getComputedStyle(controlContainer).getPropertyValue("--y"));controlContainer.style.setProperty("--x",t+e.x+"px"),controlContainer.style.setProperty("--y",n+e.y+"px")}}function initMovement(){vp=document.getElementById("viewport"),floor=document.getElementById("floor"),document.querySelector(".trigger").addEventListener("mousedown",(o=>{controlDown(o)})),scrollDiff=0,scrollOffset=320,scrollDampening=1,vp.addEventListener("mousewheel",(function(o){o.preventDefault(),o.stopPropagation(),scrollDiff+=o.wheelDelta/scrollDampening,setTransform3dZ(vp)}),!1),setTransform3dZ(vp)}function setTransform3dZ(o){scrollDiff=minmax(-3200,scrollDiff,640);let e=scrollDiff+scrollOffset;o.style.setProperty("--zoom",e+"px")}function minmax(o,e,t){return e<o?o:e>t?t:e}document.addEventListener("mouseleave",(o=>{controlUp(o)})),document.addEventListener("mouseup",(o=>{controlUp(o)})),document.addEventListener("mousemove",(o=>{isMouseDown&&(controlUp(o),controlDown(o))}));